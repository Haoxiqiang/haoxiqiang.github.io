<!DOCTYPE html>
<html manifest="H5.hyperesources/cache.manifest">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="viewport" content="user-scalable=no, initial-scale=1.0, width=device-width" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
	<title>带ta去看2022的雪圈</title>
	<style>
		html {
			height:100%;
		}
		body {
			background-color:#DA3A2C;
			margin:0;
			height:100%;
		}
		.c_layout{
			position: fixed;
			top: 20px;
			left: 20px;
			z-index: 99;
		}    
	</style>
	<script type="text/javascript">

		(function() {
			function log(info) {
				console.log(info);
		            // alert(info);
		        }
		        function forceSafariPlayAudio() {
		            audioEl.load(); // iOS 9   还需要额外的 load 一下, 否则直接 play 无效
		            audioEl.play(); // iOS 7/8 仅需要 play 一下
		        }
		        var audioEl = document.getElementById('music');
		        // 可以自动播放时正确的事件顺序是
		        // loadstart
		        // loadedmetadata
		        // loadeddata
		        // canplay
		        // play
		        // playing
		        // 
		        // 不能自动播放时触发的事件是
		        // iPhone5  iOS 7.0.6 loadstart
		        // iPhone6s iOS 9.1   loadstart -> loadedmetadata -> loadeddata -> canplay
		        // audioEl.addEventListener('loadstart', function() {
		        // 	log('loadstart');
		        // }, false);
		        // audioEl.addEventListener('loadeddata', function() {
		        // 	log('loadeddata');
		        // }, false);
		        // audioEl.addEventListener('loadedmetadata', function() {
		        // 	log('loadedmetadata');
		        // }, false);
		        // audioEl.addEventListener('canplay', function() {
		        // 	log('canplay');
		        // }, false);
		        // audioEl.addEventListener('play', function() {
		        // 	log('play');
		        //     // 当 audio 能够播放后, 移除这个事件
		        //     window.removeEventListener('touchstart', forceSafariPlayAudio, false);
		        // }, false);
		        // audioEl.addEventListener('playing', function() {
		        // 	log('playing');
		        // }, false);
		        // audioEl.addEventListener('pause', function() {
		        // 	log('pause');
		        // }, false);
		        // 由于 iOS Safari 限制不允许 audio autoplay, 必须用户主动交互(例如 click)后才能播放 audio,
		        // 因此我们通过一个用户交互事件来主动 play 一下 audio.
		        window.addEventListener('touchstart', forceSafariPlayAudio, false);
		       
		    })();

		    window.onload =function(){
		    	let h5_hype_container = document.getElementById("h5_hype_container");

		        var loadingImg = document.getElementById("loadingImg");
		        var imgContainer = document.getElementById("loadingImgContainer");
		        var control = document.getElementById('control');

		        let t = 0;
		        var timeout = setInterval(function(){
		        	t+=1;
		        	if(t>1){
		        		clearInterval(timeout);
		        	}
		        },1000);

		        var everythingLoaded = setInterval(function() {			  

		        	if (/loaded|complete/.test(document.readyState)&&t>1) {
		        		imgContainer.style.display = "none";
		        		clearInterval(everythingLoaded);
		        	}
		        	var src = loadingImg.src;
		        	var list = src.split("/");
		        	var imgSrc = list[list.length - 1];
		        	if (imgSrc == "loadingclose.png"){
		        		loadingImg.src = "H5.hyperesources/loadingopen.png";
		        	}else{
		        		loadingImg.src = "H5.hyperesources/loadingclose.png"
		        	}
		        }, 350);


		        control.onclick = function () {
		        	if(audioEl.paused){
		        		audioEl.play();
		        		this.src="H5.hyperesources/musicoff.png"
		        	}else{
		        		audioEl.pause();
		        		this.src="H5.hyperesources/musicon.png"
		        	}
		        }
		    }

		</script>
	</head>
	<body>
		<!-- copy these lines to your document: -->
		<div class="c_layout">
			<audio id="music" src="H5.hyperesources/1-10 Athretic Stage BGM.mp3" loop="1" autoplay='autoplay' style="display: none;" controls="false" preload="auto" oncanplaythrough="this.play();"></audio>
			<img id="control" src="H5.hyperesources/musicoff.png" style="width: 35px;height: 35px;" />
		</div>

		<div id="h5_hype_container" style="margin:auto;position:relative;width:100%;height:100%;overflow:hidden;" aria-live="polite">
			<script type="text/javascript" charset="utf-8" src="H5.hyperesources/h5_hype_generated_script.js?79681"></script>
			<div id="loadingImgContainer" style="clear:both;left: 50%;top:50%;margin: -31.5px 0 0 -21.5px;display: block;z-index: 1000;width: 63px;height: 43px;position: absolute;overflow: hidden;">
				<img id="loadingImg" src="H5.hyperesources/loadingopen.png" style="clear:both;margin:auto;z-index: 2;width: 63px;height: 43px;">
			</div>
		</div>
	</body>
	</html>
